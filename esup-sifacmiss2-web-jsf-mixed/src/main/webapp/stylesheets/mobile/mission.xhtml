<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:tr="http://myfaces.apache.org/trinidad"
	template="template.xhtml">
	
	<ui:define name="toolbar">
		<tr:form>
			<tr:panelHeader styleClass="toolbar" text="#{mobileMissionController.currentMission.motif}">
				<tr:commandLink styleClass="backButton" text="#{msgs['BACK.TEXT']}" action="missions">
					<f:setPropertyActionListener value="missions" target="#{sessionController.action}" />
				</tr:commandLink>
			</tr:panelHeader>
		</tr:form>
	</ui:define>
	
	<ui:define name="content">
		<div class="panelBase">
			<tr:panelCaptionGroup>
				<div class="row">
					<tr:outputText styleClass="labelText" value="#{msgs['WELCOME.MISSION.M_ORDRE']}" />
					<tr:outputText styleClass="messageText" value="#{mobileMissionController.currentMission.ordre}" />
				</div>
				<div class="row">
					<tr:outputText styleClass="labelText" value="#{msgs['WELCOME.MISSION.M_START']}" />
					<tr:outputText styleClass="messageText" value="#{mobileMissionController.currentMission.periode.debut}">
						<tr:convertDateTime locale="#{sessionController.locale}" type="date" />
					</tr:outputText>
				</div>
				<div class="row">
					<tr:outputText styleClass="labelText" value="#{msgs['WELCOME.MISSION.M_END']}" />
					<tr:outputText styleClass="messageText" value="#{mobileMissionController.currentMission.periode.fin}">
						<tr:convertDateTime locale="#{sessionController.locale}" type="date" />
					</tr:outputText>
				</div>
				<div class="row">
					<tr:outputText styleClass="labelText" value="#{msgs['WELCOME.MISSION.M_MONTANT']}" />
					<tr:outputText styleClass="messageText" value="#{mobileMissionController.currentMission.montant}">
						<tr:convertNumber locale="#{sessionController.locale}" type="currency" currencySymbol="&#8364;" />
					</tr:outputText>
				</div>
				<div class="row">
					<tr:outputText styleClass="labelText" value="#{msgs['WELCOME.MISSION.M_STATUS']}" />
					<tr:outputText styleClass="messageText"
						rendered="#{mobileMissionController.currentMission.status == 0}" 
						value="#{msgs['WELCOME.STATUS.M_NON_REMBOURSABLE']}"/>
					<tr:outputText styleClass="messageText"
						rendered="#{mobileMissionController.currentMission.status == 1}" 
						value="#{msgs['WELCOME.STATUS.M_EN_ATTENTE']}"/>
					<tr:outputText styleClass="messageText"
						rendered="#{mobileMissionController.currentMission.status == 2}" 
						value="#{msgs['WELCOME.STATUS.M_VALIDEE']}"/>
				</div>
				<div class="row">
					<tr:outputText styleClass="labelText" value="#{msgs['WELCOME.MISSION.M_DATE']}" />
					<tr:outputText styleClass="messageText"
						rendered="#{mobileMissionController.currentMission.status != 2}" 
						value="#{msgs['WELCOME.MISSION.M_DATE_BLANK']}"/>
					<tr:outputText styleClass="messageText"
						rendered="#{mobileMissionController.currentMission.status == 2}" 
						value="#{mobileMissionController.currentMission.date}"/>
				</div>
			</tr:panelCaptionGroup>
			<ui:fragment rendered="#{not empty mobileMissionController.currentMission.details}">
				<h2>
					<tr:outputText value="#{msgs['WELCOME.MISSION.M_DETAILS']}" />
				</h2>
				<tr:panelCaptionGroup>
					<tr:iterator var="detail" value="#{mobileMissionController.currentMission.details}">
						<div class="row #{detail.paid ? '' : 'gray'} cat-#{not empty detail.categorie ? detail.categorie : 'divers'}">
							<tr:outputText styleClass="labelText" value="#{detail.description}" />
							<tr:outputText styleClass="messageText" value="#{detail.montant}">
								<tr:convertNumber locale="#{sessionController.locale}" type="currency" currencySymbol="&#8364;" />
							</tr:outputText>
						</div>
					</tr:iterator>
				</tr:panelCaptionGroup>
			</ui:fragment>
		</div>
	</ui:define>

</ui:composition>